!function(a){"use strict";function b(b){a.Object.call(this,1,b),c.fixAR(this);var d=this._;d.freq=a(100),d.gain=a(2),d.sr=a.samplerate,d.t=1/d.sr,d.b0=d.a1=d.wcD=0,d.s1=d.s2=d.s3=d.s4=0}var c=a.fn;c.extend(b);var d=b.prototype;Object.defineProperties(d,{freq:{set:function(b){this._.freq=a(b)},get:function(){return this._.freq}},gain:{set:function(b){this._.gain=a(b)},get:function(){return this._.gain}}}),d.bang=function(){var a=this._;return a.s1=a.s2=a.s3=a.s4=0,a.emit("bang"),this},d.process=function(a){var b=this.cells[0],d=this._;if(this.tickID!==a){this.tickID=a,c.inputSignalAR(this);var e=d.gain.process(a).cells[0][0];e=e>4?4:0>e?0:e;var f,g,h,i,j,k,l,m,n=d.s1,o=d.s2,p=d.s3,q=d.s4,r=d.freq.process(a).cells[0][0],s=d.t,t=d.wcD,u=d.a1,v=d.b0,w=b.length;for(d.prevFreq!==r&&(d.prevFreq=r,t=2*Math.tan(s*Math.PI*r)*d.sr,0>t&&(t=0),f=s*t,v=f/(f+2),u=(f-2)/(f+2),d.b0=v,d.a1=u,d.wcD=t),m=0;w>m;++m)g=q+v*(p+v*(o+v*n)),k=b[m],l=(v*v*v*v*k+g)/(1+v*v*v*v*e),b[m]=100*l,h=k-e*l,i=h,j=v*i+n,n=v*i-u*j,j=v*i+o,o=v*i-u*j,i=j,j=v*i+p,p=v*i-u*j,q=v*j-u*l;for(d.s1=n,d.s2=o,d.s3=p,d.s4=q,m=0;w>m;++m)g=b[m],b[m]=-1>g?-1:g>1?1:g;c.outputSignalAR(this)}return this},c.register("MoogFF",b)}(timbre);