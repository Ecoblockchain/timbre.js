(function(t){"use strict";function e(e){t.Object.call(this,1,e),i.fixAR(this);var s=this._;s.freq=t(100),s.gain=t(2),s.sr=t.samplerate,s.t=1/s.sr,s.b0=s.a1=s.wcD=0,s.s1=s.s2=s.s3=s.s4=0}var i=t.fn;i.extend(e);var s=e.prototype;Object.defineProperties(s,{freq:{set:function(e){this._.freq=t(e)},get:function(){return this._.freq}},gain:{set:function(e){this._.gain=t(e)},get:function(){return this._.gain}}}),s.bang=function(){var t=this._;return t.s1=t.s2=t.s3=t.s4=0,t.emit("bang"),this},s.process=function(t){var e=this.cells[0],s=this._;if(this.tickID!==t){this.tickID=t,i.inputSignalAR(this);var n=s.gain.process(t).cells[0][0];n=n>4?4:0>n?0:n;var r,a,o,u,h,l,c,f,p=s.s1,d=s.s2,m=s.s3,v=s.s4,g=s.freq.process(t).cells[0][0],b=s.t,_=s.wcD,y=s.a1,w=s.b0,x=e.length;for(s.prevFreq!==g&&(s.prevFreq=g,_=2*Math.tan(b*Math.PI*g)*s.sr,0>_&&(_=0),r=b*_,w=r/(r+2),y=(r-2)/(r+2),s.b0=w,s.a1=y,s.wcD=_),f=0;x>f;++f)a=v+w*(m+w*(d+w*p)),l=e[f],c=(w*w*w*w*l+a)/(1+w*w*w*w*n),e[f]=100*c,o=l-n*c,u=o,h=w*u+p,p=w*u-y*h,h=w*u+d,d=w*u-y*h,u=h,h=w*u+m,m=w*u-y*h,v=w*h-y*c;for(s.s1=p,s.s2=d,s.s3=m,s.s4=v,f=0;x>f;++f)a=e[f],e[f]=-1>a?-1:a>1?1:a;i.outputSignalAR(this)}return this},i.register("MoogFF",e)})(timbre);