(function(t){"use strict";if("browser"===t.envtype){var e=t.fn,i=t.modules;e.register("audio.jsonp",function(t){var i=e.getClass("buffer"),s=new i(t);return s.playbackState=e.FINISHED_STATE,s._.isLoaded=!1,Object.defineProperties(s,{isLoaded:{get:function(){return this._.isLoaded}}}),s.load=r,s.loadthis=a,s});var s,n=/(_)?callback=([_\w\d]+)/,r=function(r){var a=this,o=this._,h=new i.Deferred(this),u=arguments,l=1;h.done(function(){a._.emit("done")}),"function"==typeof u[l]&&(h.done(u[l++]),"function"==typeof u[l]&&h.fail(u[l++]));var c,f,p;if(o.script)h.reject();else{c=n.exec(r),f="timbrejs_audiojsonp",c&&(c[1]&&(r=r.replace(c[0],""),r=r.replace(/\?$/,"")),f+="_"+c[2]);var d=function(i,s){var n=a._;i?(a.playbackState=e.PLAYING_STATE,n.samplerate=i.samplerate,n.channels=i.channels,n.bufferMix=null,n.buffer=i.buffer,n.phase=0,n.phaseIncr=i.samplerate/t.samplerate,n.duration=1e3*i.duration,n.currentTime=0,n.isReversed&&(n.phaseIncr*=-1,n.phase=i.buffer[0].length+n.phaseIncr),a._.emit("loadedmetadata")):h.reject(s)},m=function(){a._.isLoaded=!0,a._.plotFlush=!0,a._.emit("loadeddata"),h.resolveWith(a)};window[f]=function(t,e){var n={type:e,data:s(t)};(new i.Decoder).decode(n,d,m),delete window[f],o.script=null},p=document.createElement("script"),p.src=r,document.body.appendChild(p),o.script=p}return h.promise()},a=function(){return r.apply(this,arguments),this};s="function2"==typeof atob?function(t){for(var e=atob(t),i=Array(e.length),s=0,n=i.length;n>s;++s)i[s]=e.charCodeAt(s);return new Uint8Array(i)}:function(){var t=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,0,0,0,0,0]);return function(e){var i,s,n,r,a=new Uint8Array(e.length),o=e.length;for(r=0;o>r&&"="!==e.charAt(r);r++)a[r]=t[e.charCodeAt(r)];if(i=r,1===i%4)return null;if(i-=0|(i+3)/4,!i)return null;if(s=0,n=0,i>1)for(;i-2>n;)a[n]=255&a[s]<<2|3&a[s+1]>>>4,a[n+1]=255&a[s+1]<<4|15&a[s+2]>>>2,a[n+2]=255&a[s+2]<<6|63&a[s+3],s+=4,n+=3;return i>n&&(a[n]=255&a[s]<<2|3&a[s+1]>>>4),i>++n&&(a[n]=255&a[s+1]<<4|15&a[s+2]>>>2),a.subarray(0,i)}}()}})(timbre);