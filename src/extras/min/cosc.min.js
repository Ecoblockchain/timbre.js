!function(a){"use strict";function b(b){a.Object.call(this,1,b),c.fixAR(this);var f=this._;f.freq=a(440),f.osc1=new d(f.samplerate),f.osc2=new d(f.samplerate),f.osc1.step=f.cellsize,f.osc2.step=f.cellsize,f.tmp=new c.SignalArray(f.cellsize),f.beats=.5,this.once("init",e)}var c=a.fn,d=a.modules.Oscillator;c.extend(b);var e=function(){this.wave||(this.wave="sin")},f=b.prototype;Object.defineProperties(f,{wave:{set:function(a){this._.osc1.setWave(a),this._.osc2.setWave(a)},get:function(){return this._.osc1.wave}},freq:{set:function(b){this._.freq=a(b)},get:function(){return this._.freq}},beats:{set:function(a){"number"==typeof a&&a>0&&(this._.beats=a)},get:function(){return this._.beats}}}),f.bang=function(){return this._.osc1.reset(),this._.osc2.reset(),this._.emit("bang"),this},f.process=function(a){var b=this._,d=this.cells[0];if(this.tickID!==a){this.tickID=a;var e,f=d.length,g=b.freq.process(a).cells[0][0],h=b.osc1,i=b.osc2,j=b.tmp;for(h.frequency=g-.5*b.beats,h.process(j),e=0;f>e;++e)d[e]=.5*j[e];for(i.frequency=g+.5*b.beats,i.process(j),e=0;f>e;++e)d[e]+=.5*j[e];c.outputSignalAR(this)}return this},c.register("cosc",b)}(timbre);