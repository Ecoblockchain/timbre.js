!function(a){"use strict";function b(b){return d?d:(d=this,a.Object.call(this,1,b),void c.fixKR(this))}if("browser"===a.envtype){var c=a.fn,d=null;c.extend(b);var e={},f=!1,g=!1,h=!1,i=function(a){for(var b=d._,c=d.cells[0],i=a.keyCode*b.mul+b.add,j=0,k=c.length;k>j;++j)c[j]=i;f=a.shiftKey,g=a.ctrlKey,h=a.altKey,e[a.keyCode]||(e[a.keyCode]=!0,d._.emit("keydown",a))},j=function(a){delete e[a.keyCode],d._.emit("keyup",a)},k=b.prototype;Object.defineProperties(k,{shiftKey:{get:function(){return f}},ctrlKey:{get:function(){return g}},altKey:{get:function(){return h}}}),k.start=function(){return window.addEventListener("keydown",i,!0),window.addEventListener("keyup",j,!0),this},k.stop=function(){return window.removeEventListener("keydown",i,!0),window.removeEventListener("keyup",j,!0),this},k.play=k.pause=function(){return this},c.register("keyboard",b);var l={90:48,83:49,88:50,68:51,67:52,86:53,71:54,66:55,72:56,78:57,74:58,77:59,188:60,76:61,190:62,186:63,81:60,50:61,87:62,51:63,69:64,82:65,53:66,84:67,54:68,89:69,55:70,85:71,73:72,57:73,79:74,48:75,80:76},m=c.getClass("ndict");c.register("ndict.key",function(a){var b=new m(a);return b.dict=l,b})}}(timbre);