(function(t){"use strict";function e(e){return s?s:(s=this,t.Object.call(this,1,e),i.fixKR(this),void 0)}if("browser"===t.envtype){var i=t.fn,s=null;i.extend(e);var n={},r=!1,a=!1,o=!1,u=function(t){for(var e=s._,i=s.cells[0],u=t.keyCode*e.mul+e.add,h=0,l=i.length;l>h;++h)i[h]=u;r=t.shiftKey,a=t.ctrlKey,o=t.altKey,n[t.keyCode]||(n[t.keyCode]=!0,s._.emit("keydown",t))},h=function(t){delete n[t.keyCode],s._.emit("keyup",t)},l=e.prototype;Object.defineProperties(l,{shiftKey:{get:function(){return r}},ctrlKey:{get:function(){return a}},altKey:{get:function(){return o}}}),l.start=function(){return window.addEventListener("keydown",u,!0),window.addEventListener("keyup",h,!0),this},l.stop=function(){return window.removeEventListener("keydown",u,!0),window.removeEventListener("keyup",h,!0),this},l.play=l.pause=function(){return this},i.register("keyboard",e);var c={90:48,83:49,88:50,68:51,67:52,86:53,71:54,66:55,72:56,78:57,74:58,77:59,188:60,76:61,190:62,186:63,81:60,50:61,87:62,51:63,69:64,82:65,53:66,84:67,54:68,89:69,55:70,85:71,73:72,57:73,79:74,48:75,80:76},f=i.getClass("ndict");i.register("ndict.key",function(t){var e=new f(t);return e.dict=c,e})}})(timbre);